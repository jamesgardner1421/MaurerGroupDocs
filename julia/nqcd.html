<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Contributing to NQCD - MaurerGroupDocs</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../home.html">MaurerGroupDocs</a></li><li class="chapter-item expanded affix "><li class="part-title">Spectroscopy</li><li class="chapter-item expanded "><a href="../spectroscopy/castep-xps-nexafs.html"><strong aria-hidden="true">1.</strong> CASTEP XPS and NEXAFS Tutorial</a></li><li class="chapter-item expanded affix "><li class="part-title">Compilation guides</li><li class="chapter-item expanded "><a href="../compilation/aims-avon.html"><strong aria-hidden="true">2.</strong> FHI aims on Avon</a></li><li class="chapter-item expanded "><a href="../compilation/aims-sulis.html"><strong aria-hidden="true">3.</strong> FHI aims on Sulis</a></li><li class="chapter-item expanded "><a href="../compilation/gpaw-archer2.html"><strong aria-hidden="true">4.</strong> GPAW on Archer2</a></li><li class="chapter-item expanded "><a href="../compilation/gpaw-sulis.html"><strong aria-hidden="true">5.</strong> GPAW on Sulis</a></li><li class="chapter-item expanded affix "><li class="part-title">Julia tutorials</li><li class="chapter-item expanded "><a href="../julia/julia-setup.html"><strong aria-hidden="true">6.</strong> Setup Julia on HPC systems</a></li><li class="chapter-item expanded "><a href="../julia/nqcd.html" class="active"><strong aria-hidden="true">7.</strong> Contributing to NQCD</a></li><li class="chapter-item expanded "><a href="../julia/hosting-jll.html"><strong aria-hidden="true">8.</strong> Hosting binary packages with BinaryBuilder.jl</a></li><li class="chapter-item expanded "><a href="../julia/distributed-slurm.html"><strong aria-hidden="true">9.</strong> Distributed Julia on Slurm clusters</a></li><li class="chapter-item expanded affix "><li class="part-title">Visualisation and rendering</li><li class="chapter-item expanded "><a href="../visualisation/pymol.html"><strong aria-hidden="true">10.</strong> Pymol API tutorial</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MaurerGroupDocs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="contributing-to-nqcd"><a class="header" href="#contributing-to-nqcd">Contributing to NQCD</a></h1>
<p align="right">
  <a href="https://nqcd.github.io/NQCDynamics.jl/stable/">
    <img src="https://github.com/NQCD/NQCDLogo/blob/main/images/logo_with_text.png" alt="NQCDynamics.jl logo"
         title="NQCDynamics.jl" align="right" height="150"/>
  </a>
</p>
<p>This page describes the process of contributing to NQCD for members of the maurergroup.
In particular, it focuses on the case where your contributions should be kept private until ready for publication.
For general guidelines for contributing to open source Julia packages, refer to the <a href="https://github.com/SciML/ColPrac">Contributor's Guide</a> from the SciML organisation.</p>
<h2 id="nqcd-overview"><a class="header" href="#nqcd-overview">NQCD overview</a></h2>
<p>The components of NQCD are distributed over multiple repositories hosted within the <a href="https://github.com/NQCD">NQCD organisation on GitHub</a>.
Most of these repositories are <a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/managing-repository-settings/setting-repository-visibility">public</a>,
which means anyone can see all of the branches pushed to the remote repository.
Often we want to keep our developments private whilst we work on them which means we cannot use the public repositories to store our development work.</p>
<h2 id="handling-private-development"><a class="header" href="#handling-private-development">Handling private development</a></h2>
<p>There are two options that allow us to develop in private. If you are not sure which is more appropriate for your feature, feel free to ask.</p>
<h3 id="1-private-add-on-packages"><a class="header" href="#1-private-add-on-packages">1. Private add-on packages</a></h3>
<p>The modular nature of Julia and the NQCD project allows us to split up the code into multiple packages without any downsides. In fact, it is often advantageous as it allows you to add as many dependencies as you like and you are able to host your own test sets.
This set up is desirable when developing a new model built on top of <a href="https://github.com/NQCD/NQCModels.jl">NQCModels.jl</a> or an interface that requires extra dependencies or is relatively complex.
To do this, simply <a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">create a new GitHub repository</a> and generate a new Julia package.
For this, I recommend using <a href="https://github.com/invenia/PkgTemplates.jl">PkgTemplates.jl</a>.
Examples of the add-on setup include: <a href="https://github.com/NQCD/TullyNOAu111.jl">TullyNOAu111.jl</a> and <a href="https://github.com/NQCD/NNInterfaces.jl">NNInterfaces.jl</a>, along with many of the packages you can find <a href="https://github.com/NQCD">here</a>.
Technically, you are free to host these packages wherever you like, either within NQCD, maurergroup or even on your own profile.
Though the best place is probably NQCD so we can manage it more easily.
The key is that you make sure the visibility of the repository is set to private.</p>
<h3 id="2-private-forks-of-public-repositories"><a class="header" href="#2-private-forks-of-public-repositories">2. Private &quot;forks&quot; of public repositories</a></h3>
<p>If you development is more suitable within one of the existing public packages, then we must employ an alternate strategy.
We cannot publish our changes to the public repository, so we must create a private copy of the repository.
Usually when you want to create a copy of a repository, you would <a href="https://docs.github.com/en/get-started/quickstart/fork-a-repo">fork the repository</a> which has the advantage of closely linking the repositories automatically, making it easy to synchronise and publish changes.
However, GitHub does not allow for private forks of public repositories which means we must find another way.
Fortunately, GitHub provides instructions for how to <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/duplicating-a-repository">duplicate a repository</a>. We can use this to create a private copy of the public repository and manually handle the synchronisation between them.</p>
<h4 id="development-procedure"><a class="header" href="#development-procedure">Development procedure</a></h4>
<p>The development of a private feature for a public repository is as follows:</p>
<ol>
<li>Create a private copy of the main repository if it does not already exist. (<a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/duplicating-a-repository">Duplicating a repository</a>)</li>
<li>Create a new branch off of <code>main</code> named <code>{feature-name}-staging</code>.
This will act as the effective <code>main</code> branch for your new development and will never be merged into the actual <code>main</code>.</li>
<li>To work on your feature, you should create another branch off of <code>{feature-name}-staging</code> and open up a <a href="https://github.blog/2019-02-14-introducing-draft-pull-requests/">draft pull request</a>.</li>
<li>Commit as many changes as you like to your branch. These changes will appear in the pull request and the automated tests will run.</li>
<li>Merge your development branch into <code>{feature-name}-staging</code> when you are ready.</li>
<li>Repeat steps 3, 4 and 5 until your feature is complete.</li>
<li>When ready for public release, push your <code>{feature-name}-staging</code> branch to the public repository and open a pull request.
This can be merged straight away since it should be in perfect condition by this stage.</li>
</ol>
<h4 id="extra-considerations"><a class="header" href="#extra-considerations">Extra considerations</a></h4>
<p>The <code>main</code> branch of the private repository should exactly copy and be kept in sync with the <code>main</code> branch of the public repository. This can be done using GitHub actions or manually.
The private <code>main</code> branch acts only as a copy of the public repository so it is simpler to keep private developments up to date with the public repository.
Periodically, you should merge/rebase <code>main</code> into your <code>{feature-name}-staging</code> branch to ensure your developments do not fall out of sync with other changes.</p>
<p>It is recommended that the steps 3-6 are comprised of many small branches with detailed discussion in each pull request. This way we can keep things moving and are less likely to end up out of sync with other developments.</p>
<p>This process assumes that each feature is independent and the features do not interact with one another.
For most cases this will be true so it should be possible to have many features with their own <code>{feature-name}-staging</code> branches all in development at the same time.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../julia/julia-setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../julia/hosting-jll.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../julia/julia-setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../julia/hosting-jll.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
